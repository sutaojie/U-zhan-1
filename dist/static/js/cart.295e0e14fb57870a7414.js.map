{"version":3,"sources":["webpack:///./src/modules/js/api.js","webpack:///./src/modules/js/cartService.js","webpack:///./src/pages/cart/cart.js","webpack:///./src/modules/js/fetch.js"],"names":["url","hotLists","banner","topList","rank","subList","cart","searchList","details","deal","evaluation","addCart","cartLists","cartReduce","cartRemove","cartMrremove","addressLists","addressAdd","addressRemove","addressUpdate","addressSetDefault","key","hasOwnProperty","__webpack_exports__","cartService","id","Object","fetch","api","number","vue_esm","el","data","lists","total","editingShop","editingShopIndex","removePopup","removeData","computed","allSelected","get","this","length","every","shop","selected","set","newVal","forEach","goodsList","good","allRemoveSelected","removeChecked","selectLists","arr","push","price","removeLists","created","getList","methods","_this","axios_default","a","post","then","res","cartList","console","log","list","editing","editingMsg","getCheck","goods","attr","selectShop","selectAll","edit","shopIndex","item","i","reduce","add","remove","goodIndex","removeConfirm","_this2","_removeData","splice","removeShop","eidtingShop","start","e","startX","changedTouches","clientX","end","goodsIndex","endX","left","velocity_default","$refs","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","resolve","reject","__WEBPACK_IMPORTED_MODULE_1_axios___default","status","catch","error"],"mappings":"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","file":"static/js/cart.295e0e14fb57870a7414.js","sourcesContent":["let url={\n    hotLists:'/index/hotLists',\n    banner:'/index/banner',\n    topList:'/category/topList',\n    rank:'/category/rank',\n    subList:'/category/subList',\n    cart:'/cart/add',\n    searchList:'/search/list',\n    details:'/goods/details',\n    deal:'/goods/deal',\n    evaluation:'/goods/evaluation',\n    addCart: '/cart/add',\n    cartLists: '/cart/list',\n    cartReduce: '/cart/reduce',\n    cartRemove: '/cart/remove',\n    cartMrremove: '/cart/mrremove',\n    addressLists: '/address/list',\n    addressAdd: '/address/add',\n    addressRemove: '/address/remove',\n    addressUpdate: '/address/update',\n    addressSetDefault: '/address/setDefault'\n}\n// 开发环境\nlet host = 'http://rap2api.taobao.org/app/mock/7058' \n// 真实环境\n//let host\nfor (const key in url) {\n    if (url.hasOwnProperty(key)) {\n        url[key] = host + url[key]         \n    }\n}\n\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import fetch from 'js/fetch.js'\nimport url from 'js/api.js'\nclass Cart{\n    static add(id){\n        return  fetch(url.addCart, {\n            id,\n            number:1\n        })\n    }\n    static reduce(id){\n        return fetch(url.cartReduce,{\n            id,\n            number:1\n        })\n    }\n}\nexport default  Cart\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/cartService.js","import './cart_base.css'\nimport './cart_trade.css'\nimport './cart.css'\n\nimport Vue from 'vue'\nimport axios from 'axios'\nimport url from 'js/api'\nimport Velocity from 'velocity-animate'\nimport Cart from 'js/cartService.js'\nimport { Array } from 'core-js';\nnew Vue({\n    el:'#app',\n    data:{\n        lists:null,\n        total:0,\n        editingShop:null,\n        editingShopIndex:-1,\n        removePopup:false,\n        removeData:null\n    },\n    computed:{\n        allSelected:{\n            get(){\n                if(this.lists && this.lists.length){\n                    return this.lists.every(shop=>shop.selected)\n                }\n                return false\n            },\n            set(newVal){\n                this.lists.forEach(shop=>{\n                    shop.selected = newVal\n                    shop.goodsList.forEach(good=>{\n                        good.selected = newVal\n                    })\n                })\n            }\n        },\n        allRemoveSelected:{\n            get(){\n                if(this.editingShop){\n                    return this.editingShop.removeChecked\n                }\n                return false\n            },\n            set(newVal){\n                if(this.editingShop){\n                    this.editingShop.removeChecked = newVal\n                    this.editingShop.goodsList.forEach(good =>{\n                        good.removeChecked = newVal\n                    })\n                }\n            }\n        },\n        selectLists(){\n            if(this.lists&&this.lists.length){\n                let arr =[]\n                let total = 0\n                this.lists.forEach(shop=>{\n                    shop.goodsList.forEach(good=>{\n                        if(good.selected){\n                            arr.push(good)\n                            total += good.price*good.number \n                        }\n                    })\n                })\n                this.total = total\n                return arr\n            }\n            return []\n        },\n        removeLists(){\n            if(this.editingShop){\n                let arr =[]\n                this.editingShop.goodsList.forEach(good=>{\n                    if(good.removeChecked){\n                        arr.push(good)\n                    }\n                })\n                return arr\n            }\n            return []\n        }\n    },\n    created(){\n        this.getList()\n    },\n    methods:{\n        getList(){\n            axios.post(url.cartLists).then(res=>{\n                let shop = res.data.cartList\n                console.log(shop);\n                \n                shop.forEach((list)=>{\n                    list.selected = true,\n                    list.removeChecked = false\n                    list.editing = false\n                    list.editingMsg = '编辑'\n                    list.goodsList.forEach(good =>{\n                        good.selected = true\n                        good.removeChecked = false\n                    })\n                    \n                })\n                this.lists = shop\n            })\n        },\n        getCheck(shop,goods){\n            let attr = this.editingShop ? 'removeChecked' : 'selected'\n            goods[attr] = !goods[attr]\n            shop[attr] = shop.goodsList.every(good => { return good[attr]})\n        },\n        selectShop(shop){\n            let attr = this.editingShop ? 'removeChecked' : 'selected'\n            shop[attr] = !shop[attr]\n            shop.goodsList.forEach(good=>{good[attr] = shop[attr]})\n        },\n        selectAll(){\n            let attr = this.editingShop ? 'allRemoveSelected' : 'selected'\n            this[attr]= !this[attr]\n        },\n        edit(shop, shopIndex){\n            shop.editing = !shop.editing\n            shop.editingMsg = shop.editing ? '完成' : '编辑'\n            this.lists.forEach((item, i)=>{\n                if(shopIndex !== i){\n                    item.editing = false\n                    \n                    item.editingMsg = shop.editing ? '' : '编辑'\n                  \n                }\n            }),\n            this.editingShop = shop.editing?shop:null\n            this.editingShopIndex = shop.editing ? shopIndex : -1\n        },\n        reduce(good){\n            if(good.number === 1) return\n            // axios.post(url.cartReduce, {\n            //     id: good.id,\n            //     number:1\n            // }).then(res=>{\n            //     good.number -=1\n            // })\n\n            Cart.reduce(good.id).then(res=>{\n                good.number -=1\n            })\n        },\n        add(good){\n            // axios.post(url.addCart, {\n            //     id: good.id,\n            //     number:1\n            // }).then(res=>{\n            //     good.number +=1\n            // })\n\n            Cart.add(good.id).then(res=>{\n                good.number +=1\n            })\n        },\n        remove(shop,shopIndex,good,goodIndex){\n            this.removePopup = true\n            this.removeData = {shop,shopIndex,good,goodIndex}\n        },\n        removeConfirm(){\n            let {shop,shopIndex,good,goodIndex} = this.removeData\n            axios.post(url.cartRemove,{\n                id:good.id\n            }).then(res=>{\n                shop.goodsList.splice(goodIndex,1)\n                if(!shop.goodsList.length){\n                    this.lists.splice(shopIndex,1)\n                    this.removeShop()\n                }\n                this.removePopup = false\n            })\n        },\n        removeShop(){\n            this.eidtingShop = null\n            this.editingShopIndex = -1\n            this.lists.forEach(shop=>{\n                shop.editing = false\n                shop.editingMsg = '编辑'\n            })\n        },\n        start(e,item){\n            item.startX = e.changedTouches[0].clientX\n        },\n        end(e, shopIndex,item,goodsIndex){\n            let endX = e.changedTouches[0].clientX\n            let left = '0'\n            if(item.startX - endX >20){\n                left = `-60px`\n            }\n            if( endX - item.startX > 20){\n                left = `0px`\n            }\n            Velocity(this.$refs[`goods-${shopIndex}-${goodsIndex}`],{left})\n        }\n    }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js","import axios from 'axios'\nimport url from 'js/api'\nimport { resolve } from 'path';\n\nfunction fetch(url,data){\n    return new Promise((resolve,reject)=>{\n        axios.post(url,data).then(res=>{\n            if(res.data.status === 200){\n                resolve(res)\n            }else{\n                //....\n            }\n        }).catch(error =>{\n            reject(error)\n        })\n    })\n}\nexport default fetch\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/fetch.js"],"sourceRoot":""}